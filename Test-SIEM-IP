import requests
import socket

def get_ip_info():
    ip_info = {}

    # Get public IP address
    ip_info['Public IP'] = requests.get('https://api.ipify.org').text

    # Get geolocation information
    response = requests.get(f'http://ip-api.com/json/{ip_info["Public IP"]}')
    data = response.json()
    ip_info['Country'] = data['country']
    ip_info['Region'] = data['regionName']
    ip_info['City'] = data['city']
    ip_info['Latitude'] = data['lat']
    ip_info['Longitude'] = data['lon']

    # Get hostname
    ip_info['Hostname'] = socket.gethostbyaddr(ip_info['Public IP'])[0]

    # Write to text file
    with open('ip_info.txt', 'w') as file:
        for key, value in ip_info.items():
            file.write(f'{key}: {value}\n')

if __name__ == "__main__":
    get_ip_info()
    print("IP information has been saved to 'ip_info.txt'.")
